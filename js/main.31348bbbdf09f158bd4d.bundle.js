!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=4)}([function(e,t,i){var o=i(1);"string"==typeof o&&(o=[[e.i,o,""]]);var n={insert:"head",singleton:!1};i(3)(o,n);o.locals&&(e.exports=o.locals)},function(e,t,i){(e.exports=i(2)(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.scss"}])},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=function(e,t){var i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var n=(r=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=o.sources.map(function(e){return"/*# sourceURL=".concat(o.sourceRoot).concat(e," */")});return[i].concat(a).concat([n]).join("\n")}var r,s,l;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(i,"}"):i}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},n=0;n<this.length;n++){var a=this[n][0];null!=a&&(o[a]=!0)}for(var r=0;r<e.length;r++){var s=e[r];null!=s[0]&&o[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="(".concat(s[2],") and (").concat(i,")")),t.push(s))}},t}},function(e,t,i){"use strict";var o,n={},a=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}();function s(e,t){for(var i=[],o={},n=0;n<e.length;n++){var a=e[n],r=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};o[r]?o[r].parts.push(s):i.push(o[r]={id:r,parts:[s]})}return i}function l(e,t){for(var i=0;i<e.length;i++){var o=e[i],a=n[o.id],r=0;if(a){for(a.refs++;r<a.parts.length;r++)a.parts[r](o.parts[r]);for(;r<o.parts.length;r++)a.parts.push(f(o.parts[r],t))}else{for(var s=[];r<o.parts.length;r++)s.push(f(o.parts[r],t));n[o.id]={id:o.id,refs:1,parts:s}}}}function h(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var o=i.nc;o&&(e.attributes.nonce=o)}if(Object.keys(e.attributes).forEach(function(i){t.setAttribute(i,e.attributes[i])}),"function"==typeof e.insert)e.insert(t);else{var n=r(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function c(e,t,i,o){var n=i?"":o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var a=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function m(e,t,i){var o=i.css,n=i.media,a=i.sourceMap;if(n&&e.setAttribute("media",n),a&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var g=null,v=0;function f(e,t){var i,o,n;if(t.singleton){var a=v++;i=g||(g=h(t)),o=c.bind(null,i,a,!1),n=c.bind(null,i,a,!0)}else i=h(t),o=m.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a());var i=s(e,t);return l(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var r=i[a],h=n[r.id];h&&(h.refs--,o.push(h))}e&&l(s(e,t),t);for(var u=0;u<o.length;u++){var d=o[u];if(0===d.refs){for(var c=0;c<d.parts.length;c++)d.parts[c]();delete n[d.id]}}}}},function(e,t,i){"use strict";i.r(t);i(0);function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.points=t,this.roundPoints=0,this.gameEl=document.querySelector(".game-container"),this.tilesEl=document.querySelector(".game__tiles"),this.newGameBtn=document.querySelector(".header__new-game button"),this.prevButtonEl=document.querySelector(".prev-button button"),window.localStorage.gameBoard?this.gameBoard=JSON.parse(window.localStorage.gameBoard):this.gameBoard=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],window.localStorage.prevGameBoard?this.prevGameBoard=JSON.parse(window.localStorage.prevGameBoard):this.prevGameBoard=[[],[],[],[]],this.tempPrevGameBoard=[[],[],[],[]],this.gameMerged=[[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1]],this.tiles=[],this.canMove=!0,this.roundChanges=!1,this.touchPosition={x:null,y:null},this.mobileView=window.matchMedia("(max-width: 500px)"),this.isMobeile=this.mobileView.matches,this.phoneMove=!1,this.mobileView.addListener(function(e){i.isMobeile=e.matches,i.resizeTiles()})}var t,i,n;return t=e,(i=[{key:"getTileValue",value:function(){return 4*Math.random()<3?2:4}},{key:"getTilePosition",value:function(){var e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());return null===this.gameBoard[e][t]?{y:e,x:t}:this.getTilePosition()}},{key:"createTile",value:function(e,t){var i=document.createElement("div"),o=document.createElement("div");this.roundChanges=!1,i.className="game__tile game__tile--new",o.className="game__tile-content",o.textContent=this.gameBoard[e][t],this.handleColorClass(i,this.gameBoard[e][t]),i.appendChild(o),this.tilesEl.appendChild(i),this.tiles.push({tile:i,y:e,x:t}),this.isMobeile?(i.style.left=t*(4+i.clientWidth)+8+"px",i.style.top=e*(4+i.clientHeight)+8+"px"):(i.style.left=t*(10+i.clientWidth)+15+"px",i.style.top=e*(10+i.clientHeight)+15+"px")}},{key:"resizeTiles",value:function(){var e=this;this.tiles.forEach(function(t){e.isMobeile?(t.tile.style.left=t.x*(4+t.tile.clientWidth)+8+"px",t.tile.style.top=t.y*(4+t.tile.clientHeight)+8+"px"):(t.tile.style.left=t.x*(10+t.tile.clientWidth)+15+"px",t.tile.style.top=t.y*(10+t.tile.clientHeight)+15+"px")})}},{key:"handleColorClass",value:function(e,t){e.classList.remove("game__tile--2"),e.classList.remove("game__tile--4"),e.classList.remove("game__tile--8"),e.classList.remove("game__tile--16"),e.classList.remove("game__tile--32"),e.classList.remove("game__tile--64"),e.classList.remove("game__tile--128"),e.classList.remove("game__tile--256"),e.classList.remove("game__tile--512"),e.classList.remove("game__tile--1024"),e.classList.remove("game__tile--2048"),e.classList.remove("game__tile--4096"),e.classList.remove("game__tile--8192"),e.classList.remove("game__tile--16384"),e.classList.remove("game__tile--32768"),e.classList.remove("game__tile--65536"),e.classList.remove("game__tile--131072"),e.classList.add("game__tile--".concat(t))}},{key:"tileAnim",value:function(e,t,i,o){var n=this,a=null,r=this.tiles.filter(function(i,o){if(i.y===e&&i.x===t)return a=o,i});r=r[0].tile,this.tiles[a].x=o,this.tiles[a].y=i,this.roundChanges=!0;var s=null,l=this.tiles.filter(function(e,t){if(e.y===i&&e.x===o)return s=t,e});l.length>1&&(this.tiles.splice(s,1),setTimeout(function(){l[1].tile.remove(),l[0].tile.querySelector(".game__tile-content").textContent=n.gameBoard[i][o],l[0].tile.classList.add("game__tile--merged"),n.handleColorClass(l[0].tile,n.gameBoard[i][o])},150)),this.isMobeile?(r.style.left=o*(4+r.clientWidth)+8+"px",r.style.top=i*(4+r.clientHeight)+8+"px"):(r.style.left=o*(10+r.clientWidth)+15+"px",r.style.top=i*(10+r.clientHeight)+15+"px")}},{key:"onRightMove",value:function(){var e=this;this.updatePrevBoard(),this.tiles.forEach(function(e){return e.tile.classList.remove("game__tile--new")}),this.tiles.forEach(function(e){return e.tile.classList.remove("game__tile--merged")}),this.canMove=!1,setTimeout(function(){return e.canMove=!0},150)}},{key:"updatePrevBoard",value:function(){for(var e=0;e<this.gameBoard.length;++e)for(var t=0;t<this.gameBoard.length;++t)this.tempPrevGameBoard[e][t]=this.prevGameBoard[e][t],this.prevGameBoard[e][t]=this.gameBoard[e][t]}},{key:"setPrevBoard",value:function(){if(this.prevGameBoard[0].length>0){for(var e=0;e<this.gameBoard.length;++e)for(var t=0;t<this.gameBoard.length;++t)this.gameBoard[e][t]=this.prevGameBoard[e][t];this.tiles.forEach(function(e){return e.tile.remove()}),this.prevGameBoard=[[],[],[],[]],this.tiles=[],this.points.setPrevPoints();for(var i=0;i<this.gameBoard.length;++i)for(var o=0;o<this.gameBoard.length;++o)this.gameBoard[i][o]&&this.createTile(i,o);window.localStorage.setItem("prevGameBoard",JSON.stringify(this.prevGameBoard)),window.localStorage.setItem("gameBoard",JSON.stringify(this.gameBoard))}}},{key:"createRandomTile",value:function(){var e=this.getTileValue(),t=this.getTilePosition(),i=t.y,o=t.x;this.gameBoard[i][o]=e,this.createTile(i,o)}},{key:"setMerged",value:function(e,t){this.gameMerged[e][t]=!0,this.roundPoints+=this.gameBoard[e][t]}},{key:"unsetMerged",value:function(){for(var e=0;e<this.gameBoard.length;++e)for(var t=0;t<this.gameBoard.length;++t)this.gameMerged[e][t]=!1}},{key:"updatePoints",value:function(){this.roundPoints>0&&this.points.updatePoints(this.roundPoints),this.roundPoints=0,window.localStorage.setItem("gameBoard",JSON.stringify(this.gameBoard))}},{key:"leftMove",value:function(){for(var e=0;e<this.gameBoard.length;++e)for(var t=0;t<this.gameBoard.length;++t)if(this.gameBoard[e][t]){for(var i=t;void 0!==this.gameBoard[e][i-1]&&null===this.gameBoard[e][i-1];)i--;if(void 0===this.gameBoard[e][i-1]||this.gameMerged[e][i-1]||this.gameBoard[e][i-1]!==this.gameBoard[e][t]){if(t!==i){var o=[this.gameBoard[e][t],null];this.gameBoard[e][i]=o[0],this.gameBoard[e][t]=o[1],this.tileAnim(e,t,e,i)}}else this.gameBoard[e][i-1]=2*this.gameBoard[e][t],this.setMerged(e,i-1),this.gameBoard[e][t]=null,this.tileAnim(e,t,e,i-1)}}},{key:"upMove",value:function(){for(var e=0;e<this.gameBoard.length;++e)for(var t=0;t<this.gameBoard.length;++t)if(this.gameBoard[e][t]){for(var i=e;void 0!==this.gameBoard[i-1]&&void 0!==this.gameBoard[i-1][t]&&null===this.gameBoard[i-1][t];)--i;if(void 0===this.gameBoard[i-1]||void 0===this.gameBoard[i-1][t]||this.gameMerged[i-1][t]||this.gameBoard[i-1][t]!==this.gameBoard[e][t]){if(e!==i){var o=[this.gameBoard[e][t],null];this.gameBoard[i][t]=o[0],this.gameBoard[e][t]=o[1],this.tileAnim(e,t,i,t)}}else this.gameBoard[i-1][t]=2*this.gameBoard[e][t],this.setMerged(i-1,t),this.gameBoard[e][t]=null,this.tileAnim(e,t,i-1,t)}}},{key:"rightMove",value:function(){for(var e=0;e<this.gameBoard.length;++e)for(var t=this.gameBoard.length-1;t>=0;--t)if(this.gameBoard[e][t]){for(var i=t;void 0!==this.gameBoard[e][i+1]&&null===this.gameBoard[e][i+1];)i++;if(void 0===this.gameBoard[e][i+1]||this.gameMerged[e][i+1]||this.gameBoard[e][i+1]!==this.gameBoard[e][t]){if(t!==i){var o=[this.gameBoard[e][t],null];this.gameBoard[e][i]=o[0],this.gameBoard[e][t]=o[1],this.tileAnim(e,t,e,i)}}else this.gameBoard[e][i+1]=2*this.gameBoard[e][t],this.setMerged(e,i+1),this.gameBoard[e][t]=null,this.tileAnim(e,t,e,i+1)}}},{key:"downMove",value:function(){for(var e=this.gameBoard.length-1;e>=0;--e)for(var t=0;t<this.gameBoard.length;++t)if(this.gameBoard[e][t]){for(var i=e;void 0!==this.gameBoard[i+1]&&void 0!==this.gameBoard[i+1][t]&&null===this.gameBoard[i+1][t];)++i;if(void 0===this.gameBoard[i+1]||void 0===this.gameBoard[i+1][t]||this.gameMerged[i+1][t]||this.gameBoard[i+1][t]!==this.gameBoard[e][t]){if(e!==i){var o=[this.gameBoard[e][t],null];this.gameBoard[i][t]=o[0],this.gameBoard[e][t]=o[1],this.tileAnim(e,t,i,t)}}else this.gameBoard[i+1][t]=2*this.gameBoard[e][t],this.setMerged(i+1,t),this.gameBoard[e][t]=null,this.tileAnim(e,t,i+1,t)}}},{key:"move",value:function(e){if(this.canMove){switch(e.keyCode){case 37:this.onRightMove(),this.leftMove();break;case 38:this.onRightMove(),this.upMove();break;case 39:this.onRightMove(),this.rightMove();break;case 40:this.onRightMove(),this.downMove()}if(this.roundChanges)this.unsetMerged(),this.createRandomTile(),this.updatePoints(),window.localStorage.setItem("prevGameBoard",JSON.stringify(this.prevGameBoard));else for(var t=0;t<this.gameBoard.length;++t)for(var i=0;i<this.gameBoard.length;++i)this.prevGameBoard[t][i]=this.tempPrevGameBoard[t][i]}}},{key:"touchStart",value:function(e){this.touchPosition={x:e.touches[0].screenX,y:e.touches[0].screenY}}},{key:"touchMove",value:function(e){if(this.canMove&&null!==this.touchPosition.x&&null!==this.touchPosition.y){var t={x:e.touches[0].screenX,y:e.touches[0].screenY},i={x:this.touchPosition.x-t.x,y:this.touchPosition.y-t.y};if(i.x*i.x>i.y*i.y?i.x>30?(this.onRightMove(),this.leftMove(),this.phoneMove=!0):i.x<-30&&(this.onRightMove(),this.rightMove(),this.phoneMove=!0):i.y>30?(this.onRightMove(),this.upMove(),this.phoneMove=!0):i.y<-30&&(this.onRightMove(),this.downMove(),this.phoneMove=!0),this.phoneMove){if(this.roundChanges)this.unsetMerged(),this.createRandomTile(),this.updatePoints(),window.localStorage.setItem("prevGameBoard",JSON.stringify(this.prevGameBoard)),this.touchPosition={x:null,y:null};else for(var o=0;o<this.gameBoard.length;++o)for(var n=0;n<this.gameBoard.length;++n)this.prevGameBoard[o][n]=this.tempPrevGameBoard[o][n];this.phoneMove=!1}}}},{key:"resetGame",value:function(){this.gameBoard=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.prevGameBoard=[[],[],[],[]],this.tiles.forEach(function(e){return e.tile.remove()}),this.tiles=[],this.points.resetPoints();for(var e=0;e<2;++e)this.createRandomTile();window.localStorage.setItem("gameBoard",JSON.stringify(this.gameBoard))}},{key:"init",value:function(){for(var e=this,t=0;t<this.gameBoard.length;++t)for(var i=0;i<this.gameBoard.length;++i)this.gameBoard[t][i]&&this.createTile(t,i);if(0===this.tiles.length)for(var o=0;o<2;++o)this.createRandomTile();window.addEventListener("keydown",function(t){return e.move(t)}),this.gameEl.addEventListener("touchstart",function(t){return e.touchStart(t)}),window.addEventListener("touchmove",function(t){return e.touchMove(t)}),this.newGameBtn.addEventListener("click",function(){return e.resetGame()}),window.localStorage.setItem("gameBoard",JSON.stringify(this.gameBoard)),this.prevButtonEl.addEventListener("click",function(){return e.setPrevBoard()})}}])&&o(t.prototype,i),n&&o(t,n),e}();function a(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.points=window.localStorage.points&&!isNaN(window.localStorage.points)?Number(window.localStorage.points):0,this.prevPoints=null,this.record=window.localStorage.record&&!isNaN(window.localStorage.record)?Number(window.localStorage.record):0,this.pointsEl=document.querySelector(".header__current-points p"),this.reacordEl=document.querySelector(".header__record-points p")}var t,i,o;return t=e,(i=[{key:"initPoints",value:function(){this.pointsEl.textContent=this.points,this.reacordEl.textContent=this.record}},{key:"updateRecord",value:function(){this.record=this.points,window.localStorage.record=this.points,this.reacordEl.textContent=this.points}},{key:"updatePoints",value:function(e){this.prevPoints=this.points,this.points+=e,window.localStorage.points=this.points,this.pointsEl.textContent=this.points,this.points>this.record&&this.updateRecord()}},{key:"setPrevPoints",value:function(){null!==this.prevPoints&&(this.points=this.prevPoints,this.prevPoints=null,window.localStorage.points=this.points,this.pointsEl.textContent=this.points,this.points>this.record&&this.updateRecord())}},{key:"resetPoints",value:function(){this.points=0,this.prevPoints=null,this.pointsEl.textContent=this.points,window.localStorage.points=this.points}},{key:"getPoints",value:function(){return this.points}}])&&a(t.prototype,i),o&&a(t,o),e}()),s=new n(r);r.initPoints(),s.init(),window.addEventListener("keydown",function(e){[37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault()},!1)}]);